### 索引

##### 聚集索引（聚簇索引）

- 非叶子节点存放主键id和指针
- 叶子节点存放主键id和数据

##### 辅助索引（非聚簇索引）

- 非叶子节点存放索引的字段和指针
- 叶子节点存放索引的字段和主键id

##### 索引区分性



---

### 存储引擎

##### InnoDB

- 至少有一个聚集索引
- 聚集索引的叶子节点存储数据
- 辅助索引的叶子节点存储主键id

##### MyISAM

- 聚集索引和辅助索引的叶子节点存储数据的地址

---

#### 回表查询

先通过辅助索引查找到主键id，再通过主键id找到数据，这个过程需要扫描两次B+Tree。

#### 索引覆盖

只需要在一颗索引树上就能获取SQL中所需要的列，无需回表。

```sql
-- 在字段age上建立辅助索引。

-- 只需要在一颗索引树上就可以得到结果，无需回表查询。
select id,age from user where age=10;

-- 因为name列不在age的索引树上，所以需要先通过age的索引树查询到主键id，再通过聚集索引查询出需要的数据。
select id,age,name from user where age = 10;
```

---

### DDL

```
1.线上执行DDL语句一定要在低峰期，因为有些DDL可能会引起锁表。
```

